{# apps/sales/templates/sales/detail.html #}
{% extends "base_auth.html" %}

{% block title %}Venta {{ venta.pk }}{% endblock %}

{% block content %}
<div class="container-fluid py-3">

  {# Breadcrumb #}
  <nav aria-label="breadcrumb" class="mb-2">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item"><a href="{% url 'sales:list' %}">Ventas</a></li>
      <li class="breadcrumb-item active" aria-current="page">Detalle</li>
    </ol>
  </nav>

  {# Header + Action bar #}
  {% include "sales/detail/_header.html" %}

  <div class="row g-3 mb-3">
    <div class="col-12 col-lg-8">

      {# Meta / resumen (ID, badges, datos, notas) #}
      {% include "sales/detail/_meta_card.html" with venta=venta %}

      {# Descuentos & Pagos ya modularizados #}
      {% include "sales/_discounts_card.html" %}
      {% include "sales/_payments_card.html" with venta=venta pagos=pagos %}

      {# √çtems (servicios) #}
      {% include "sales/detail/_items_card.html" with venta=venta venta_items=venta_items %}

    </div>

    <div class="col-12 col-lg-4">
      {# Resumen de totales #}
      {% include "sales/_summary_card.html" with venta=venta %}

      {# Agregar servicios #}
      {% include "sales/_services_add_card.html" %}

      {# Comprobante #}
      {% include "sales/detail/_comprobante_card.html" %}

      {# Notificaciones (WhatsApp) #}
      {% include "sales/detail/_notifications_card.html" %}
    </div>
  </div>

  {# Modales (cada uno en su parcial) #}
  {% include "sales/detail/_modal_start.html" %}
  {% include "sales/detail/_modal_finalize.html" %}
  {% include "sales/detail/_modal_cancel.html" %}

</div>
{% endblock %}
